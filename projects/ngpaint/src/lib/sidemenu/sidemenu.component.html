<div class="sidemenu">
  <div class="mainMenu" *ngIf="!submenu">
    <mat-list>
      <mat-list-item (click)="submenu = 'draw'">
        Dessin
      </mat-list-item>
      <mat-divider></mat-divider>
      <mat-list-item (click)="submenu = 'filter'">
        Filtres
      </mat-list-item>
      <mat-divider></mat-divider>
      <ng-container *ngIf="historic.length > 1">
        <mat-list-item (click)="reset.emit(historic[historic.length - 2])">
          Annuler
        </mat-list-item>
        <mat-divider></mat-divider>
      </ng-container>
      <mat-list-item (click)="reset.emit(null)">
        Image d'origine
      </mat-list-item>
    </mat-list>
  </div>
  <div class="drawMenu" *ngIf="submenu === 'draw'">
    <mat-list>
      <mat-list-item (click)="submenu = null; draw.emit(null)">
        &lt; Back
      </mat-list-item>
      <mat-divider></mat-divider>
      <mat-list-item (click)="draw.emit('draw')">
        Pinceau
      </mat-list-item>
      <mat-divider></mat-divider>
      <mat-list-item>
        <div>Couleur: </div>
        <input [colorPicker]="drawParam.color" [value]="drawParam.color" [style.background]="drawParam.color" [cpOutputFormat]="'hexa'"
        (colorPickerChange)="changeDrawColor($event)" >
      </mat-list-item>
      <mat-divider></mat-divider>
      <mat-list-item>
        <div>Taille: </div>
        <span><input type="range" min="1" max="15" [(ngModel)]="drawParam.size" (change)="drawParamChange.emit(drawParam)">
          {{drawParam.size}}px
        </span>
      </mat-list-item>
      <mat-divider></mat-divider>
      <ng-container *ngIf="historic.length > 1">
        <mat-list-item (click)="reset.emit(historic[historic.length - 2])">
          Annuler
        </mat-list-item>
        <mat-divider></mat-divider>
      </ng-container>
      <mat-list-item (click)="reset.emit(null)">
        Image d'origine
      </mat-list-item>
    </mat-list>
  </div>
  <div class="filterMenu" *ngIf="submenu === 'filter'">
    <mat-list>
      <mat-list-item (click)="submenu = null">
        &lt; Back
      </mat-list-item>
    </mat-list>
    <mat-accordion>
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          Luminosité & Contraste
        </mat-expansion-panel-header>
        <div class="itemListDisplay">
          <span>Luminosité</span>
          <span><input type="range" min="-100" max="100" [(ngModel)]="brightness"> {{brightness}}%</span>
          <button (click)="applyFilter('brightness', brightness)">Valider</button>
        </div>
        <mat-divider></mat-divider>
        <div class="itemListDisplay">
          <span>Contraste</span>
          <span><input type="range" min="-100" max="100" [(ngModel)]="contrast"> {{contrast}}%</span>
          <button (click)="applyFilter('contrast', contrast)">Valider</button>
        </div>
        <mat-divider></mat-divider>
        <div class="itemListDisplay">
          <span>Saturation</span>
          <span><input type="range" min="-100" max="100" [(ngModel)]="saturation"> {{saturation}}%</span>
          <button (click)="applyFilter('saturation', saturation)">Valider</button>
        </div>
      </mat-expansion-panel>
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          Filtres
        </mat-expansion-panel-header>
        <mat-list class="filterList">
          <mat-list-item (click)="applyFilter('invert', null)">
            Négatif
          </mat-list-item>
          <mat-divider></mat-divider>
          <mat-list-item (click)="applyFilter('grayscale', null)">
            Grayscale
          </mat-list-item>
          <mat-divider></mat-divider>
          <mat-list-item (click)="applyFilter('sepia', null)">
            Sepia
          </mat-list-item>
          <mat-divider></mat-divider>
          <mat-list-item (click)="applyFilter('candy', null)">
            Candy
          </mat-list-item>
          <mat-divider></mat-divider>
          <mat-list-item (click)="applyFilter('gaussian', null)">
            Gaussien
          </mat-list-item>
          <mat-divider></mat-divider>
          <mat-list-item (click)="applyFilter('sharpen', null)">
            Sharpen
          </mat-list-item>
        </mat-list>
      </mat-expansion-panel>
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          Souligner une couleur
        </mat-expansion-panel-header>
        <mat-radio-group [(ngModel)]="emphasing.color">
          <mat-radio-button value="red">Rouge</mat-radio-button>
          <mat-radio-button value="green">Vert</mat-radio-button>
          <mat-radio-button value="blue">Bleu</mat-radio-button>
        </mat-radio-group>
        <div class="itemListDisplay">
          <span>
            <input type="range" min="0" max="255" [(ngModel)]="emphasing.intensity">
            {{emphasing.intensity}}
          </span>
          <button (click)="applyFilter('emphasing', emphasing)">Valider</button>
        </div>
      </mat-expansion-panel>
    </mat-accordion>
    <mat-list>
      <ng-container *ngIf="historic.length > 1">
        <mat-list-item (click)="reset.emit(historic[historic.length - 2])">
          Annuler
        </mat-list-item>
      <mat-divider></mat-divider>
      </ng-container>
      <mat-list-item (click)="reset.emit()">
        Image d'origine
      </mat-list-item>
    </mat-list>
  </div>
</div>
